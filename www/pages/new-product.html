<template>
	<div class="page" data-name="new-product">
		<!-- Navbar-->
		<div class="navbar">
			<div class="navbar-bg"></div>
			<div class="navbar-inner sliding">
				<div class="left">
					<a href="#" class="link back">
						<i class="icon icon-back"></i>
						<span class="if-not-md">Back</span>
					</a>
				</div>
				<div class="title">New Product</div>
			</div>
		</div>
		<!-- Page content-->
		<div class="page-content">
			<form class="list" id="new-product-form">
				<div class="list">
					<div class="list no-hairlines-md">
						<ul class="row">
							<li class="col-95 item-content item-input">
								<div class="row item-inner">
									<div class="item-input-wrap">
										<input type="text" placeholder="Code" id="product-code" name="code" required validate>
									</div>
								</div>
								<i class="icon f7-icons" id="product-barcode">barcode_viewfinder</i>
							</li>
							<li class="col-100 item-content item-input">
								<div class="item-inner">
									<div class="item-input-wrap">
										<input type="text" placeholder="Name" id="product-name" name="name" required validate>
									</div>
								</div>
							</li>
							<li class="col-100 item-content item-input">
								<div class="item-inner">
									<div class="item-input-wrap">
										<input type="text" placeholder="Price" id="product-price" name="price" required validate  data-error-message="Only numbers please!" inputmode="decimal"/>
									</div>
								</div>
							</li>
							<li class="col-100 item-content item-input">
								<div class="item-inner">
									<div class="item-input-wrap">
										<input type="number" placeholder="Quantity" id="product-quantity" name="quantity" required validate pattern="[0-9]*" min="0" data-error-message="Only numbers please!"/>
									</div>
								</div>
							</li>
							<li class="col-95 item-content item-input">
								<div class="item-inner">
									<div class="item-input-wrap">
										<input type="text" placeholder="Shop" id="product-shop" name="shop" required validate>
									</div>
								</div>
								<i class="icon f7-icons popup-open popup-shop-list" data-popup=".popup-shop-list">cart</i>
							</li>
						</ul>
					</div>
				</div>
				<!-- Pop up list -->
				<div class="popup popup-shop-list">
					<div class="page-content">
						<div class="navbar">
							<div class="navbar-bg"></div>
							<div class="navbar-inner sliding">
								<div class="left">
									<a href="#" class="link popup-close">
										<i class="icon icon-back"></i>
										<span class="if-not-md">Back</span>
									</a>
								</div>
								<div class="title">Shop List</div>
							</div>
						</div>
						<div class="list">
							<ul id="popup-shop-list"></ul>
						</div>
					</div>
				</div>
				<!-- Picture -->
				<div class="block display-flex justify-content-center">
					<div>
						<img style="width:146px;height:146px" id="imageFile" src="assets/pictures/camera.png">
						<div id="uploading-picture" class="display-flex justify-content-center"></div>
					</div>
				</div>
				<!-- Button -->
				<div class="block">
					<div class="row display-flex justify-content-flex-end">
						<div class="col-30">
							<a href="#" id="photo-album" class="button button-raised button-fill photo-album">Album</a>
						</div>
						<div class="col-10"><span></span></div>
						<div class="col-30 ">
							<a href="#" id="photo-picture" class="button button-raised button-fill photo-picture">Camera</a>
						</div>
					</div>
				</div>
				<!-- Button -->
				<div class="row display-flex justify-content-center">
					<div class="col-80 align-self-center">
						<a href="#" class="button button-raised button-fill convert-new-product-form-to-data">Save</a>
					</div>
				</div>
			</form>
		</div>
	</div>
</template>

<script>
	return {
    data: function () {
      return {
        }
    },
    on: {
      pageInit: function(e, page) {
        const barcodeButton = document.getElementById('product-barcode');
        const productShopInput = document.getElementById('product-shop');
        const shopListPopUp = document.getElementById('popup-shop-list');
        const uploadingPictureDiv = document.getElementById('uploading-picture');
        const albumButton = document.getElementById('photo-album');
        const cameraButton = document.getElementById('photo-picture');

        barcodeButton.addEventListener('click', scanBarcode);
        popUpShopList(shopListPopUp);
        albumButton.addEventListener('click', openFilePicker);
        cameraButton.addEventListener('click', openCamera);    
        getNewProductDataFromForm(uploadingPictureDiv);
      } 
    }
  }

</script>