<template>
	<div class="page" data-name="new-product">

		<div class="navbar">
			<div class="navbar-bg"></div>
			<div class="navbar-inner sliding">
				<div class="left">
					<a href="#" class="link back">
						<i class="icon icon-back"></i>
						<span class="if-not-md">Back</span>
					</a>
				</div>
				<div class="title">Product</div>
			</div>
		</div>

		<div class="page-content">
			<form class="list" id="new-product-form">
				<div class="list">
					<div class="list no-hairlines-md">
						<ul>
							<div class="row display-flex">
								<div class="col-95 align-content-space-around">
									<li class="item-content item-input">
										<div class="item-inner">
											<div class="item-input-wrap">
												<textarea class="resizable" placeholder="Code" id="product-code" name="product-code" required validate></textarea>
											</div>
										</div>
										<i class="icon f7-icons">barcode_viewfinder</i>
										<i class="icon material-icons if-md">barcode_viewfinder</i>
									</li>
								</div>
							</div>
							<li class="item-content item-input">
								<div class="item-inner">
									<div class="item-input-wrap">
                    <textarea class="resizable" placeholder="Name" id="product-name" name="product-name" required validate></textarea>
									</div>
								</div>
							</li>
							<li class="item-content item-input">
								<div class="item-inner">
									<div class="item-input-wrap">
                    <textarea class="resizable" placeholder="Price" id="product-price" name="product-price" required validate></textarea>
									</div>
								</div>
							</li>
							<li class="item-content item-input">
								<div class="item-inner">
									<div class="item-input-wrap">
                    <textarea class="resizable" placeholder="Quantity" id="product-quantity" name="product-quantity" required validate></textarea>
									</div>
								</div>
							</li>
							<div class="row display-flex">
								<div class="col-95 align-content-space-around">
									<li class="item-content item-input">
										<div class="item-inner">
											<div class="item-input-wrap">
                        <textarea class="resizable" placeholder="Shop" id="product-shop" name="product-shop" required validate></textarea>
											</div>
										</div>
										<i class="icon f7-icons">cart</i>
										<i class="icon material-icons if-md">cart</i>
									</li>
								</div>
							</div>
						</ul>
					</div>
				</div>

				<div class="block block-strong display-flex justify-content-center">
					<p class="align-self-center">PICTURE</p>
				</div>

				<div class="block">
					<div class="row display-flex justify-content-flex-end">
						<div class="col-30">
							<a href="#" class="button button-raised button-fill">Album</a>
						</div>
						<div class="col-10"><span></span></div>
						<div class="col-30 ">
							<a href="#" class="button button-raised button-fill ">Camera</a>
						</div>
					</div>
				</div>

				<div class="row display-flex justify-content-center">
					<div class="col-80 align-self-center">
						<a href="#" class="button button-raised button-fill convert-product-form-to-data">Save</a>
					</div>
				</div>
			</form>

		</div>

	</div>
</template>

<script>
	return {
      data: function () {
       return {
        }
      },
    
    on: {
      pageInit: function(e, page) {
        // Get new product data from form
        $$(document).on('click', '.convert-product-form-to-data', function () {
          if (app.methods.isProductFormEmpty()) {
          const jsonObject = app.methods.dataToJson('#new-product-form');
          console.log(jsonObject);
          // Add data to the database
          db.collection('products').add({
          'code': jsonObject.code,
          'name': jsonObject.name,
          'price': jsonObject.price,
          'quantity': jsonObject.quantity,
          'shop': jsonObject.shop,
          });

          app.methods.emptyNewProductForm();
          app.dialog.alert('Product added to the products list.', '');
          } else app.dialog.alert('Please fill out the form first.', '');
        });

      } //pageInit
    }
  }

</script>